<%- include('../partials/head.ejs') %>
    <div class="border-2 bg-slate-50 p-5 rounded flex flex-col gap-5">
        <div class="flex items-center justify-between">
            <h1 class="text-3xl">Profile</h1>
            <a href="/profile/setting" class="btn">Setting<i class="fa-solid fa-gear"></i></a>
        </div>
        <div class="flex flex-col gap-2">

            <!-- access_code -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">Access Code</p>
                <p id="access_code" class="tracking-widest"></p>
            </div>
            <!-- email -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">Email</p>
                <p id="email"></p>
            </div>
            <!-- first_name -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">First Name</p>
                <p class="capitalize">
                    <%= session.first_name %>
                </p>
            </div>
            <!-- last_name -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">Last Name</p>
                <p class="capitalize">
                    <%= session.last_name %>
                </p>
            </div>
            <!-- status -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">Status</p>
                <p id="status"></p>
            </div>
            <!-- role -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">Role</p>
                <p id="role"></p>
            </div>
            <!-- created_at -->
            <div class="flex items-center gap-4 border rounded bg-white p-3">
                <p class="text-xl">Created At</p>
                <p id="created_at"></p>
            </div>

            <a href="/logout" class="btn-red ml-auto">Logout</a>

        </div>
    </div>

    <script>

        const email = document.querySelector('#email')
        const status = document.querySelector('#status')
        const access_code = document.querySelector('#access_code')
        const role = document.querySelector('#role')
        const created_at = document.querySelector('#created_at')

        try {
            fetch('/api/profile', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(res => res.json())
                .then(data => {
                    email.innerText = data.email
                    status.innerText = data.status
                    access_code.innerText = data.access_code
                    role.innerText = data.role
                    created_at.innerText = data.created_at
                })
        } catch (error) {
            console.error(error)
        }

    </script>
    <%- include('../partials/foot.ejs') %>